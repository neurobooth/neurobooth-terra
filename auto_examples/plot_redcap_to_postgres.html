<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Ingest table from Redcap into Postgres &#8212; neurobooth-terra  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-rendered-html.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          neurobooth-terra</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="index.html">Examples</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="https://github.com/neurobooth/neurobooth-terra">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Ingest table from Redcap into Postgres</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/auto_examples/plot_redcap_to_postgres.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-plot-redcap-to-postgres-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="ingest-table-from-redcap-into-postgres">
<span id="sphx-glr-auto-examples-plot-redcap-to-postgres-py"></span><h1>Ingest table from Redcap into Postgres<a class="headerlink" href="#ingest-table-from-redcap-into-postgres" title="Permalink to this headline">Â¶</a></h1>
<p>This example demonstrates how to create table from Redcap.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authors: Mainak Jas &lt;mjas@harvard.mgh.edu&gt;</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">redcap</span> <span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">RedcapError</span>
<span class="kn">from</span> <span class="nn">neurobooth_terra.ingest_redcap</span> <span class="kn">import</span> <a href="../generated/neurobooth_terra.ingest_redcap.fetch_survey.html#neurobooth_terra.ingest_redcap.fetch_survey" title="neurobooth_terra.ingest_redcap.fetch_survey" class="sphx-glr-backref-module-neurobooth_terra-ingest_redcap sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.ingest_redcap.fetch_survey.html#neurobooth_terra.ingest_redcap.fetch_survey" title="neurobooth_terra.ingest_redcap.fetch_survey" class="sphx-glr-backref-module-neurobooth_terra-ingest_redcap sphx-glr-backref-type-py-function"><span class="n">fetch_survey</span></a></a>
</pre></div>
</div>
<p>Let us first define the surveys and their survey IDs that we want to fetch.
This information can be found on Redcap. To fetch Redcap data, you will
also need to define the NEUROBOOTH_REDCAP_TOKEN environment variable.
You will need to request for the Redcap API token from Redcap interface.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_ids</span></a></a> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;consent&#39;</span><span class="p">:</span> <span class="mi">84349</span><span class="p">,</span> <span class="s1">&#39;contact&#39;</span><span class="p">:</span> <span class="mi">84427</span><span class="p">,</span> <span class="s1">&#39;demographics&#39;</span><span class="p">:</span> <span class="mi">84429</span><span class="p">,</span>
              <span class="s1">&#39;clinical&#39;</span><span class="p">:</span> <span class="mi">84431</span><span class="p">,</span> <span class="s1">&#39;falls&#39;</span><span class="p">:</span> <span class="mi">85031</span><span class="p">,</span> <span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="mi">84426</span><span class="p">}</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_ids</span></a></a> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="mi">84426</span><span class="p">,</span> <span class="s1">&#39;consent&#39;</span><span class="p">:</span> <span class="mi">84349</span><span class="p">}</span>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">URL</span></a></a> <span class="o">=</span> <span class="s1">&#39;https://redcap.partners.org/redcap/api/&#39;</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">API_KEY</span></a></a> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEUROBOOTH_REDCAP_TOKEN&#39;</span><span class="p">)</span>

<span class="k">if</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">API_KEY</span></a></a> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Please define the environment variable NEUROBOOTH_REDCAP_TOKEN first&#39;</span><span class="p">)</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">URL</span></a></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">API_KEY</span></a></a><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, we fetch the metadata table. This table is the master table
that contains columns and their informations. It can be used to infer
information about the columns: example, what choices are available for a
particular question.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fetching metadata ...&#39;</span><span class="p">)</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">export_metadata</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;df&#39;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">metadata_fields</span></a></a> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">,</span> <span class="s1">&#39;form_name&#39;</span><span class="p">,</span> <span class="s1">&#39;section_header&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;field_type&#39;</span><span class="p">,</span> <span class="s1">&#39;select_choices_or_calculations&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;required_field&#39;</span><span class="p">]</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">metadata_fields</span></a></a><span class="p">]</span>
<span class="c1"># metadata.to_csv(op.join(data_dir, &#39;data_dictionary.csv&#39;), index=False)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[Done]&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Fetching metadata ...
[Done]
</pre></div>
</div>
<p>Finally, we loop over the surveys and collect them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dfs</span></a></a> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_name</span></a></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_id</span></a></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_ids</span></a></a><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <a href="../generated/neurobooth_terra.ingest_redcap.fetch_survey.html#neurobooth_terra.ingest_redcap.fetch_survey" title="neurobooth_terra.ingest_redcap.fetch_survey" class="sphx-glr-backref-module-neurobooth_terra-ingest_redcap sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.ingest_redcap.fetch_survey.html#neurobooth_terra.ingest_redcap.fetch_survey" title="neurobooth_terra.ingest_redcap.fetch_survey" class="sphx-glr-backref-module-neurobooth_terra-ingest_redcap sphx-glr-backref-type-py-function"><span class="n">fetch_survey</span></a></a><span class="p">(</span><span class="n">project</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_name</span></a></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_id</span></a></a><span class="p">)</span>
    <span class="c1"># convert NaN to None for psycopg2</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">notnull</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dfs</span></a></a><span class="p">[</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">survey_name</span></a></a><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Fetching report subject from Redcap
[Done]
Fetching report consent from Redcap
[Done]
</pre></div>
</div>
<p>Now, we will add the consent table to the subject table so we can
match subjects based on record_id</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_joined</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dfs</span></a></a><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dfs</span></a></a><span class="p">[</span><span class="s1">&#39;consent&#39;</span><span class="p">],</span> <span class="n">rsuffix</span><span class="o">=</span><span class="s1">&#39;consent&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_joined</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Index([&#39;record_id&#39;, &#39;redcap_event_name&#39;, &#39;redcap_repeat_instrument&#39;,
       &#39;redcap_repeat_instance&#39;, &#39;first_name_birth&#39;, &#39;middle_name_birth&#39;,
       &#39;last_name_birth&#39;, &#39;date_of_birth&#39;, &#39;country_of_birth&#39;, &#39;birthplace&#39;,
       &#39;gender_at_birth&#39;, &#39;record_idconsent&#39;, &#39;redcap_event_nameconsent&#39;,
       &#39;redcap_repeat_instrumentconsent&#39;, &#39;redcap_repeat_instanceconsent&#39;,
       &#39;redcap_survey_identifier&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
<p>Now, we will prepare the contents of the subject table in postgres</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hashlib</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">rows_subject</span></a></a> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">rows_consent</span></a></a> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_ids</span></a></a> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

<span class="k">for</span> <span class="n">df_row</span> <span class="ow">in</span> <span class="n">df_joined</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">df_row</span> <span class="o">=</span> <span class="n">df_row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># need at least name to add to table</span>
    <span class="k">if</span> <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;first_name_birth&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">continue</span>

    <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a></a> <span class="o">=</span> <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;first_name_birth&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;last_name_birth&#39;</span><span class="p">]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a></a> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a></a><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

    <span class="c1"># XXX: hack, why are there duplicate subjects?</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_ids</span></a></a><span class="p">:</span>
        <span class="k">continue</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_ids</span></a></a><span class="o">.</span><span class="n">append</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a></a><span class="p">)</span>

    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">rows_subject</span></a></a><span class="o">.</span><span class="n">append</span><span class="p">((</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a></a><span class="p">,</span>
                        <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;first_name_birth&#39;</span><span class="p">],</span>
                        <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;middle_name_birth&#39;</span><span class="p">],</span>
                        <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;last_name_birth&#39;</span><span class="p">],</span>
                        <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;date_of_birth&#39;</span><span class="p">],</span>
                        <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;country_of_birth&#39;</span><span class="p">],</span>
                        <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;gender_at_birth&#39;</span><span class="p">],</span>
                        <span class="n">df_row</span><span class="p">[</span><span class="s1">&#39;birthplace&#39;</span><span class="p">]))</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">rows_consent</span></a></a><span class="o">.</span><span class="n">append</span><span class="p">((</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a></a><span class="p">,</span>
                        <span class="s1">&#39;study1&#39;</span><span class="p">,</span>  <span class="c1"># study_id</span>
                        <span class="s1">&#39;Neuroboother&#39;</span><span class="p">,</span>  <span class="c1"># staff_id</span>
                        <span class="s1">&#39;REDCAP&#39;</span><span class="p">,</span>  <span class="c1"># application_id</span>
                        <span class="s1">&#39;MGH&#39;</span><span class="p">,</span>  <span class="c1"># site_id</span>
                        <span class="c1"># None, # date (missing)</span>
                        <span class="c1"># df_row[&#39;educate_clinicians_adults&#39;],</span>
                        <span class="c1"># df_row[&#39;educate_clinicians_initials_adult&#39;],</span>
                        <span class="c1"># bool(df_row[&#39;future_research_consent_adult&#39;])</span>
    <span class="p">))</span>
<span class="k">for</span> <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">row_subject</span></a></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">rows_subject</span></a></a><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">row_subject</span></a></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;11253c82a3365f445047eb6c652b7b9e&#39;, &#39;Louis&#39;, &#39;Ron&#39;, &#39;Hernandez&#39;, &#39;1966-09-05&#39;, 1.0, 1.0, &#39;Worcester&#39;)
(&#39;056c329596bfe609d731e046a9578b31&#39;, &#39;Marcella&#39;, &#39;Catherine &#39;, &#39;Russell&#39;, &#39;1984-08-19&#39;, 1.0, 2.0, &#39;Denver&#39;)
(&#39;a2f3512e457f0e63197c01cd863901af&#39;, &#39;Colleen&#39;, &#39;Mary&#39;, &#39;Gordon&#39;, &#39;1924-07-15&#39;, 1.0, 2.0, &#39;Portland&#39;)
(&#39;1d45fcd6e1cfda61971a6c840b40730c&#39;, &#39;Ann&#39;, &#39;Marie&#39;, &#39;Benson&#39;, &#39;1958-04-16&#39;, 1.0, 2.0, &#39;Toledo&#39;)
(&#39;ea5b85adb4af96fce82882048b1ff02a&#39;, &#39;Grady&#39;, &#39;Burt&#39;, &#39;Fleming&#39;, &#39;1943-07-25&#39;, 1.0, 1.0, &#39;Boston&#39;)
</pre></div>
</div>
<p>Now, we will first create a connection to the database</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="kn">from</span> <span class="nn">neurobooth_terra</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <a href="../generated/neurobooth_terra.create_table.html#neurobooth_terra.create_table" title="neurobooth_terra.create_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.create_table.html#neurobooth_terra.create_table" title="neurobooth_terra.create_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><span class="n">create_table</span></a></a><span class="p">,</span> <a href="../generated/neurobooth_terra.drop_table.html#neurobooth_terra.drop_table" title="neurobooth_terra.drop_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.drop_table.html#neurobooth_terra.drop_table" title="neurobooth_terra.drop_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><span class="n">drop_table</span></a></a>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">connect_str</span></a></a> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;dbname=&#39;neurobooth&#39; user=&#39;neuroboother&#39; host=&#39;localhost&#39; &quot;</span>
               <span class="s2">&quot;password=&#39;neuroboothrocks&#39;&quot;</span><span class="p">)</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">connect_str</span></a></a><span class="p">)</span>
</pre></div>
</div>
<p>We will drop our tables if they already exist
this is just for convenience so we can re-run this script
and create a new mock subject table and consent table to test our script</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="../generated/neurobooth_terra.drop_table.html#neurobooth_terra.drop_table" title="neurobooth_terra.drop_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.drop_table.html#neurobooth_terra.drop_table" title="neurobooth_terra.drop_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><span class="n">drop_table</span></a></a><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<a href="../generated/neurobooth_terra.drop_table.html#neurobooth_terra.drop_table" title="neurobooth_terra.drop_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.drop_table.html#neurobooth_terra.drop_table" title="neurobooth_terra.drop_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><span class="n">drop_table</span></a></a><span class="p">(</span><span class="s1">&#39;consent&#39;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">table_id</span></a></a> <span class="o">=</span> <span class="s1">&#39;subject&#39;</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cols_subject</span></a></a> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s1">&#39;first_name_birth&#39;</span><span class="p">,</span> <span class="s1">&#39;middle_name_birth&#39;</span><span class="p">,</span>
                <span class="s1">&#39;last_name_birth&#39;</span><span class="p">,</span> <span class="s1">&#39;date_of_birth&#39;</span><span class="p">,</span> <span class="s1">&#39;country_of_birth&#39;</span><span class="p">,</span>
                <span class="s1">&#39;gender_at_birth&#39;</span><span class="p">,</span> <span class="s1">&#39;birthplace&#39;</span><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">datatypes</span></a></a> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">,</span>
             <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">]</span>
<a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table" title="neurobooth_terra.Table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table" title="neurobooth_terra.Table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">table_subject</span></a></a> <span class="o">=</span> <a href="../generated/neurobooth_terra.create_table.html#neurobooth_terra.create_table" title="neurobooth_terra.create_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.create_table.html#neurobooth_terra.create_table" title="neurobooth_terra.create_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><span class="n">create_table</span></a></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">table_id</span></a></a><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cols_subject</span></a></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">datatypes</span></a></a><span class="p">)</span>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">table_id</span></a></a> <span class="o">=</span> <span class="s1">&#39;consent&#39;</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cols_consent</span></a></a> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s1">&#39;study_id&#39;</span><span class="p">,</span> <span class="s1">&#39;staff_id&#39;</span><span class="p">,</span> <span class="s1">&#39;application_id&#39;</span><span class="p">,</span>
                <span class="s1">&#39;site_id&#39;</span><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">datatypes</span></a></a> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;VARCHAR (255)&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cols_consent</span></a></a><span class="p">)</span>
<a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table" title="neurobooth_terra.Table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table" title="neurobooth_terra.Table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">table_consent</span></a></a> <span class="o">=</span> <a href="../generated/neurobooth_terra.create_table.html#neurobooth_terra.create_table" title="neurobooth_terra.create_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><a href="../generated/neurobooth_terra.create_table.html#neurobooth_terra.create_table" title="neurobooth_terra.create_table" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-function"><span class="n">create_table</span></a></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">table_id</span></a></a><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cols_consent</span></a></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">datatypes</span></a></a><span class="p">)</span>
</pre></div>
</div>
<p>Then we insert the rows in this table</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.insert_rows" title="neurobooth_terra.Table.insert_rows" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.insert_rows" title="neurobooth_terra.Table.insert_rows" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><span class="n">table_subject</span><span class="o">.</span><span class="n">insert_rows</span></a></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">rows_subject</span></a></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cols_subject</span></a></a><span class="p">)</span>
<a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.insert_rows" title="neurobooth_terra.Table.insert_rows" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.insert_rows" title="neurobooth_terra.Table.insert_rows" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><span class="n">table_consent</span><span class="o">.</span><span class="n">insert_rows</span></a></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">rows_consent</span></a></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cols_consent</span></a></a><span class="p">)</span>
</pre></div>
</div>
<p>Letâs do a query to check that the content is in there</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.query" title="neurobooth_terra.Table.query" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.query" title="neurobooth_terra.Table.query" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><span class="n">table_subject</span><span class="o">.</span><span class="n">query</span></a></a><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.query" title="neurobooth_terra.Table.query" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><a href="../generated/neurobooth_terra.Table.html#neurobooth_terra.Table.query" title="neurobooth_terra.Table.query" class="sphx-glr-backref-module-neurobooth_terra sphx-glr-backref-type-py-method"><span class="n">table_consent</span><span class="o">.</span><span class="n">query</span></a></a><span class="p">())</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>                                 date_of_birth  ...      birthplace
subject_id                                      ...
11253c82a3365f445047eb6c652b7b9e    1966-09-05  ...       Worcester
056c329596bfe609d731e046a9578b31    1984-08-19  ...          Denver
a2f3512e457f0e63197c01cd863901af    1924-07-15  ...        Portland
1d45fcd6e1cfda61971a6c840b40730c    1958-04-16  ...          Toledo
ea5b85adb4af96fce82882048b1ff02a    1943-07-25  ...          Boston
6e119410857519b61cefda204dab8fe8    1968-11-17  ...     Cincinnati
25902514a6064f2e2579840c9f4d0264    1963-10-27  ...  San Francisco
44ec7a449f47cd156b8d4de7c207909b    1980-04-20  ...           Paris
405ec3d4e94fed218c3fdb333665d1dd    1963-06-08  ...          Dallas
bc60e302c748ed4dde344bc475f80e46    1934-04-03  ...       Cambridge
f3140a00a23e579cc721a0c6675e726c    1997-07-25  ...       Worcester
50f2d3ff596aa167ae10a3557320d857    1984-04-07  ...   New York City
afe2d37341100f1619d55fc8cad1a13f    1984-04-07  ...   New York City

[13 rows x 7 columns]
                                 study_id      staff_id application_id site_id
subject_id
11253c82a3365f445047eb6c652b7b9e   study1  Neuroboother         REDCAP     MGH
056c329596bfe609d731e046a9578b31   study1  Neuroboother         REDCAP     MGH
a2f3512e457f0e63197c01cd863901af   study1  Neuroboother         REDCAP     MGH
1d45fcd6e1cfda61971a6c840b40730c   study1  Neuroboother         REDCAP     MGH
ea5b85adb4af96fce82882048b1ff02a   study1  Neuroboother         REDCAP     MGH
6e119410857519b61cefda204dab8fe8   study1  Neuroboother         REDCAP     MGH
25902514a6064f2e2579840c9f4d0264   study1  Neuroboother         REDCAP     MGH
44ec7a449f47cd156b8d4de7c207909b   study1  Neuroboother         REDCAP     MGH
405ec3d4e94fed218c3fdb333665d1dd   study1  Neuroboother         REDCAP     MGH
bc60e302c748ed4dde344bc475f80e46   study1  Neuroboother         REDCAP     MGH
f3140a00a23e579cc721a0c6675e726c   study1  Neuroboother         REDCAP     MGH
50f2d3ff596aa167ae10a3557320d857   study1  Neuroboother         REDCAP     MGH
afe2d37341100f1619d55fc8cad1a13f   study1  Neuroboother         REDCAP     MGH
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.922 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-plot-redcap-to-postgres-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/aa9cc0aa64c7679d8d6160220406645c/plot_redcap_to_postgres.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_redcap_to_postgres.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/3157cab1da4d2e49f6f1ae311932b277/plot_redcap_to_postgres.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_redcap_to_postgres.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021, Neurobooth Developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>